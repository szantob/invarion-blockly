<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Blockly Demo: Fixed Blockly</title>
  <script src="./blockly/blockly_compressed.js"></script>
  <script src="./blockly/blocks_compressed.js"></script>
  <script src="./blockly/msg/js/en.js"></script>
  <script src="./blockly/javascript_compressed.js"></script>
  <script src="./dollDef.js"></script>
  <!-- <script src="./dollStub.js"></script> -->
  
  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</head>
<body>

  <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>

  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
	  <category name="Concept Model Blocks">
		<block type="concept_model">
		  <field name="NAME">concept model name</field>
		</block>
	  </category>
	  <category name="Vocabulary" custom="VOCABULARY"></category>
	  <category name="Taxonomy" custom="VARIABLE"></category>
	  <category name="Data Model" custom="VARIABLE"></category>
  </xml>
  <xml xmlns="https://developers.google.com/blockly/xml" id="workspaceBlocks" style="display: none"></xml>

  <script>
	var coloursFlyoutCallback = function(workspace) {
	  // Returns an array of hex colours, e.g. ['#4286f4', '#ef0447']
	  var colourList = ['#4286f4', '#ef0447'];
	  var xmlList = [];
	  if (Blockly.Blocks['colour_picker']) {
		for (var i = 0; i < colourList.length; i++) {
		  var blockText = '<block type="colour_picker">' +
			  '<field name="COLOUR">' + colourList[i] + '</field>' +
			  '</block>';
		  var block = Blockly.Xml.textToDom(blockText);
		  xmlList.push(block);
		}
	  }
	  return xmlList;
	};
  
	var toolbox = document.getElementById("toolbox");

	var options = { 
		toolbox : toolbox, 
		collapse : true, 
		comments : true, 
		disable : true, 
		maxBlocks : Infinity, 
		trashcan : true, 
		horizontalLayout : false, 
		toolboxPosition : 'start', 
		css : true, 
		media : 'https://blockly-demo.appspot.com/static/media/', 
		rtl : false, 
		scrollbars : true, 
		sounds : true, 
		oneBasedIndex : true
	};

	var workspace = Blockly.inject('blocklyDiv', options);
	workspace.registerToolboxCategoryCallback('VOCABULARY', coloursFlyoutCallback);
	var workspaceBlocks = document.getElementById("workspaceBlocks"); 
	Blockly.Xml.domToWorkspace(workspaceBlocks, workspace);
  </script>
  <script src="custom-dialog.js"></script>

</body>
</html>

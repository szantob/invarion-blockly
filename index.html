<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Blockly Demo: Fixed Blockly</title>
  <script src="./blockly/blockly_compressed.js"></script>
  <script src="./blockly/blocks_compressed.js"></script>
  <script src="./blockly/msg/js/en.js"></script>
  <script src="./blockly/javascript_compressed.js"></script>
  <script src="./conceptmodel.js"></script>
  <script src="./vocabulary.js"></script>
  <script src="./datamodel.js"></script>
  <script src="./taxonomy.js"></script>
  <script>
	var workspace_xml = 
		'<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">'+
		  '<category name="Concept Model Blocks">'+
			'<block type="concept_model">'+
			  '<field name="NAME">concept model name</field>'+
			'</block>'+
			'<block type="concept_model_dec_name">'+
			  '<field name="NAME">concept model name</field>'+
			'</block>'+
			'<block type="concept_model_dec_vocabulary">'+
			  '<field name="NAME">concept model name</field>'+
			'</block>'+
			'<block type="concept_model_dec_taxonomy">'+
			  '<field name="NAME">concept model name</field>'+
			'</block>'+
			'<block type="concept_model_dec_datamodel">'+
			  '<field name="NAME">concept model name</field>'+
			'</block>'+
		  '</category>'+
		  '<category name="Vocabulary" custom="VOCABULARY"></category>'+
		  '<category name="Taxonomy" custom="TAXONOMY"></category>'+
		  '<category name="Data Model" custom="DATAMODEL"></category>'+
		'</xml>';
	var toolboxUpdate = function(){
		workspace.updateToolbox(workspace_xml);
		//workspace.renderTree(workspace_xml);
	}
  </script>
  <!-- <script src="./dollStub.js"></script> -->
  
  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</head>
<body>

  <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>

  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
	  <category name="Concept Model Blocks">
	  </category>
  </xml>
  <xml xmlns="https://developers.google.com/blockly/xml" id="workspaceBlocks" style="display: none"></xml>

  <script>
  
	var toolbox = document.getElementById("toolbox");

	var options = { 
		toolbox : toolbox, 
		collapse : true, 
		comments : true, 
		disable : true, 
		maxBlocks : Infinity, 
		trashcan : true, 
		horizontalLayout : false, 
		toolboxPosition : 'start', 
		css : true, 
		media : 'https://blockly-demo.appspot.com/static/media/', 
		rtl : false, 
		scrollbars : true, 
		sounds : true, 
		oneBasedIndex : true
	};

	var workspace = Blockly.inject('blocklyDiv', options);
	workspace.registerToolboxCategoryCallback('VOCABULARY', vocabularyCallback);
	workspace.registerToolboxCategoryCallback('TAXONOMY', taxonomyCallback);
	workspace.registerToolboxCategoryCallback('DATAMODEL', datamodelCallback);
	workspace.registerButtonCallback('vocabularyNewEntry', vocabularyNewEntryCallback);
	workspace.registerButtonCallback('taxonomyNewEntry', taxonomyNewEntryCallback);
	var workspaceBlocks = document.getElementById("workspaceBlocks"); 
	Blockly.Xml.domToWorkspace(workspaceBlocks, workspace);
	toolboxUpdate();
  </script>

</body>
</html>
